# 一只“懒”蚂蚁的故事

题外话：ppt制作过程中，每个人准备这个过程，都很辛苦，每天我都跟女朋友讲一遍，耳朵听气泡了。每天在我讲的时候，她玩了好几局王者荣耀，我讲完了，她段位也从青铜到黄金了。后来有一次她实在听不下去了，说已经倒背如流，给我讲了一遍。结果我也去玩王者荣耀去了。

所以左老板是不是考虑给演讲的人点福利，比如给没女朋友的发个女朋友啥的。这样大家就不会觉得演讲苦逼又没我啥事了。

## 开场
- 自介：大家好，我是疯狂的小蘑菇，来自哈尔滨，我发现这边很少有老乡。你们等会从ppt就能看出来我有多懒。
- 简介：和之前各位讲技术、产品或发展史不一样，今天要分享的，是我进公司以后的经历，来说出心中的故事。
- 愿景：接下来请你注意听讲，一定会让你受益匪浅，也可能会改变你的一生。
我不希望我自己在这balabalabala，大家愿意的话可以跟我一起讨论，不愿意的，那就思维或者灵魂跟上我，有问题随时打断。

## 目录
首先我会讲讲我在工作中遇到的一些麻烦以及如何用技术方式解决的，然后是怎样创造行云流水的编程体验。
接下来说下我进蚂蚁之后的思维收获。最后通过讲个小故事，来说说我的梦想。

## 麻烦
我不喜欢上来就讲一堆理论，我们先“举个栗子”

- 遇到的麻烦

今天我会分享很多代码。很多人觉得讲代码没有意思，也没什么技术含量。我不信这个邪，想试试能不能把代码讲的精彩绝伦。

在我们的工作中，经常需要校验字段的正确性。在一些框架，像react中，采用声明式PropType的方式校验。这种校验也叫做契约式，双方定好一个契约，一旦数据错误，就撕毁契约，抛出异常或者给出提示。这种方式很难做嵌套校验。

所以我们采用防御式校验，也就是主动做判断，但非常繁琐冗长，稍微没判断好页面就白屏了。比如说这段代码，写了这么长的代码做判断。

## 更大的麻烦：我是如何工作的
- 初来乍到
这里先卖个关子，不说我是哪个组的。我要是讲的好，我就是我们组的，我要是讲的不好，你们就当我是汗僧组的好了。
- 最后：dva脚手架，mocks数据脚手架。

## 思维
### 习惯
在一次cr会上，我的leader提了个问题，每个人说一个自己的好习惯。我觉得这点很好，人之所以能够进步，很大程度上取决于一些好习惯。

总结下来，有以下几点。

而我的习惯有两点：坚持，因为我觉得任何事情都能通过时间来解决，你花的时间是别人的几倍，总有一天能超越。另一个是用逆向思维思考问题，今天分享下逆向思维。

### 逆向思维
好处是别人很难获得你的想法，难猜透你的布局，这样你很容易战胜对手。第二个好处是成功难以抄袭与复制。

讲两个烂掉牙的小故事，大多数人都听过。买柿子的故事、抓小偷的故事。本来准备5个故事，由于时间关系，只说两个。

如果有兴趣的通过可以看下：用逆向思维解决难题与万万没想到。

### 王者荣耀设计思维

前端时间有个很火的游戏叫做王者荣耀，有这么多的群体，玩家来响应，一个成功的产品，一定有不一样的设计。那么它为什么很容易上瘾？首先我们来看看他是如何设计游戏结束的。

峰终定律只能用在游戏中么？当然不是，它可以用在医院甚至企业。

我一个朋友，在他们公司，以周为单位，每周都会给大家创造一个巅峰体验。比如上着班的时候，突然领着大家去看电影。大家很开心，觉得这公司太牛了。

然后每周五的时候，必定和大家有一个，一起喝咖啡的晚餐聊天时光，找一个小四合院，对着夕阳大家一起发朋友圈。员工很满意，这公司太牛逼了，早就忘记平时加班跟狗似的。

除了峰终定律，游戏结束的过程，还运用了随机奖励，及时反馈，心里暗示等一系列的方法。而游戏画面的细腻设计更加不用说了，玩过的都知道。用户体验就是通过这些细微的设计提升的。

## 最大的收获：代码规范化
技术好的不一定代码写的好，代码写的好的技术一定好。

我总结出来一份优秀代码最佳实践。包括写的不好的代码样例，代码检查点以及如何写好代码。

### 子程序

子程序是抽象出来的代码，可以是类/模块/函数/存储过程等。

子程序是否优秀不在于实现，而在于如何使用。如名字，参数与文档等等。子程序的名字是最好的注解。

### 何时抽象子程序

- 可能会改变的需求

如果需求可能会更改，应该考虑抽象子程序。
当需求需要实现几套功能（如pc/mobile）并且频繁改动的时候。抽象出多套子程序比在一套子程序中做判断更好维护。

### 高内聚
内聚是从功能角度来度量模块内的联系，一个好的内聚模块应当恰好做一件事。比如说split/max等函数

经过随机抽样的450份子程序调查发现，高内聚的子程序50%没有任何错误，而低内聚的子程序只有18%没有任何错误。而内聚性低的子程序比内聚性高的子程序比最高的出问题的几率高出7倍，修正成本高出20倍，原因就是内聚低的子程序越改越复杂）。

不得不提下我的leader，看他的代码你会发现高度内聚，出错的概率很低。

### 纯函数

子程序必须为纯函数，不要改变参数或全局变量。如果使用非纯函数会造成两点后果：

- 如果有闭包引用，那么很难删掉或修改这个函数的引用。同样难以调整顺序。无法做闭包的模拟，易于做单元测试。
- 同时由于js作用域查找顺序，优先查找作用域下的变量。性能也会有所提升。

### ant-util
解决代码重复的问题
文档，初中水平

##  梦想
- 最懒老板的故事

曾经有位老板，是中国首富，他的公司一路高歌猛进，把腾讯、阿里等公司远远甩在后面。

但他不知道的是，一场危机正向他慢慢袭来。从2006年开始，他去医院的次数慢慢变多，一次加班出来，他突然毫无征兆地倒在地上。当时已是晚上十点多，他躺在浦东一座立交桥下面，虽然意识清醒，但怎么也站不起来，他挣扎着掏出手机叫来救护车。

经历了这一次，他心里开始怀疑：这个事情不科学啊！因为我从小看的电视剧都是这样讲的，一个人创业成功了，每天喝个小酒、开开车、下下棋。为什么到我头上，每天这么拼命，最后都把自己拼到医院里去呢？

他开始反思，事业需要拼命才能成功这件事情，到底对不对？

恰好这时候，他的父亲来看他，他向他爸说了疑惑之后，他爸问了他五个问题：

问题一：你觉得你聪明吗？
他：我觉得还行。
问题二：你是不是世界上最聪明的人？
他：这个完全不可能。
问题三：你努力吗？
他：比较努力，一年只休息 30 多天。
问题四：你是最努力的人吗？
他：肯定不是。今天碰到一个投行的人，他说曾经有一年只休息过 7 天。
第五个问题，他父亲问：“你们不是最聪明也不是最努力，那么凭什么让你们赚那么多钱？”

他一下子不吭声了，于是他父亲替他总结：你们要记住，你们肯定是聪明而且努力的，但是比这些更重要的是，你们遇到了一个千载难逢的机会，
所以才会有这样的成绩。

原来他以前一直崇尚的拼命工作方法，是错的。

从此，他的员工上班965，中午打一个小时太极拳，周末双休，绝不加班。

他更过分，每天只工作6小时，每天10点半到公司，中午花两小时吃饭、健身，晚上6点雷打不动回家，周末绝不干活。

甚至公司章程还有一条：“当公司利益和家庭利益出现矛盾的时候，员工要优先选择家庭。”他每个月甚至给员工父母发工资，鼓励员工享受生活。
　　
这家公司的业绩是：只靠一款APP，5年获得全球9亿用户！

月活跃用户5.2亿，日下载量甚至超过了微信和QQ！

他相信，决策与正确的方向，比勤奋更重要。

相信很多同学也都猜到了。这款软件叫做WIFI万能钥匙，他和他的弟弟，就是中国前首富陈大年与陈天桥。
